import{V as y,v as d,u as n,x as w}from"./index-7f53179d.js";import{u as c}from"./index-2cbf28d9.js";let m=!1;function g(s,u,f={}){const{window:o=w,ignore:p=[],capture:E=!0,detectIframe:h=!1}=f;if(!o)return;y&&!m&&(m=!0,Array.from(o.document.body.children).forEach(e=>e.addEventListener("click",d)),o.document.documentElement.addEventListener("click",d));let r=!0;const l=e=>p.some(t=>{if(typeof t=="string")return Array.from(o.document.querySelectorAll(t)).some(a=>a===e.target||e.composedPath().includes(a));const i=n(t);return i&&(e.target===i||e.composedPath().includes(i))}),k=[c(o,"click",e=>{const t=n(s);if(!(!t||t===e.target||e.composedPath().includes(t))){if(e.detail===0&&(r=!l(e)),!r){r=!0;return}u(e)}},{passive:!0,capture:E}),c(o,"pointerdown",e=>{const t=n(s);t&&(r=!e.composedPath().includes(t)&&!l(e))},{passive:!0}),h&&c(o,"blur",e=>{setTimeout(()=>{const t=n(s);o.document.activeElement?.tagName==="IFRAME"&&!t?.contains(o.document.activeElement)&&u(e)},0)})].filter(Boolean);return()=>k.forEach(e=>e())}export{g as o};
