import{c as f}from"./index-ac6458ce.js";import{n as g,Z as l,C as S,D as y}from"./index-1dd1638f.js";import{u as d}from"./index-d2858649.js";import{u as h}from"./index-704a12f6.js";function O(e,u={}){const{controls:c=!1,navigator:r=l}=u,n=h(()=>r&&"permissions"in r);let t;const m=typeof e=="string"?{name:e}:e,[s,o]=g(),a=()=>{t&&o(t.state)},p=y(),i=f(async()=>{if(n()){if(!t)try{t=await r.permissions.query(m),S(p,()=>{d(t,"change",a)}),a()}catch{o("prompt")}return t}});return i(),c?{state:s,isSupported:n,query:i}:s}export{O as u};
