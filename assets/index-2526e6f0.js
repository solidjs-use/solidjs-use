import{c as f}from"./index-9cc34db9.js";import{r as g,Z as l,y,z as S}from"./index-7a1cdecc.js";import{u as d}from"./index-7395b581.js";import{u as h}from"./index-7cd72ca2.js";function P(r,u={}){const{controls:c=!1,navigator:e=l}=u,s=h(()=>e&&"permissions"in e);let t;const m=typeof r=="string"?{name:r}:r,[n,o]=g(),a=()=>{t&&o(t.state)},p=S(),i=f(async()=>{if(s()){if(!t)try{t=await e.permissions.query(m),y(p,()=>{d(t,"change",a)}),a()}catch{o("prompt")}return t}});return i(),c?{state:n,isSupported:s,query:i}:n}export{P as u};
