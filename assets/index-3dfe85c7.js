import{u as B}from"./index-95a84c4d.js";import{p as D}from"./index-ac6458ce.js";import{n,v as h,D as I}from"./index-65f89b6f.js";function _(r,s,w){const{immediate:p=!0,delay:y=0,onError:g=h,onSuccess:E=h,resetOnExecute:v=!0,throwError:x}=w??{},[a,i]=n(s),[L,c]=n(!1),[u,f]=n(!1),[S,l]=n(void 0);async function d(t=0,...o){v&&i(()=>s),l(void 0),c(!1),f(!0),t>0&&await D(t);const A=typeof r=="function"?r(...o):r;try{const e=await A;i(()=>e),c(!0),E(e)}catch(e){if(l(e),g(e),x)throw e}finally{f(!1)}return a()}p&&d(y);const m={state:a,isReady:L,isLoading:u,error:S,execute:d},O=I();function R(){return new Promise((t,o)=>{B(u,O).toBe(!1).then(()=>t(m)).catch(o)})}return{...m,then(t,o){return R().then(t,o)}}}export{_ as u};
