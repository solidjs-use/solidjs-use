import{c as f}from"./index-491744ff.js";import{z as g,X as l,A as S,B as y}from"./index-05c5b92d.js";import{u as d}from"./index-75dd5f68.js";import{u as h}from"./index-2cbcf060.js";function P(e,u={}){const{controls:c=!1,navigator:r=l}=u,s=h(()=>r&&"permissions"in r);let t;const m=typeof e=="string"?{name:e}:e,[n,o]=g(),a=()=>{t&&o(t.state)},p=y(),i=f(async()=>{if(s()){if(!t)try{t=await r.permissions.query(m),S(p,()=>{d(t,"change",a)}),a()}catch{o("prompt")}return t}});return i(),c?{state:n,isSupported:s,query:i}:n}export{P as u};
