import{B as l,w as y}from"./index-dbcfc8dd.js";import{_ as u,S as d,O as a,i as b,a as x}from"./Observable-551bfbb9.js";import{s as S,a as w,f as E,i as L,S as g,b as T}from"./mapTo-85b7d1a8.js";var I=function(t){u(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.notifyNext=function(e,r,i,o,f){this.destination.next(r)},n.prototype.notifyError=function(e,r){this.destination.error(e)},n.prototype.notifyComplete=function(e){this.destination.complete()},n}(d),V=function(t){u(n,t);function n(e,r,i){var o=t.call(this)||this;return o.parent=e,o.outerValue=r,o.outerIndex=i,o.index=0,o}return n.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},n.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(d);function k(t,n,e,r,i){if(i===void 0&&(i=new V(t,e,r)),!i.closed)return n instanceof a?n.subscribe(i):S(n)(i)}function h(t,n,e,r){return x(e)&&(r=e,e=void 0),r?h(t,n,e).pipe(w(function(i){return b(i)?r.apply(void 0,i):r(i)})):new a(function(i){function o(f){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(f)}v(t,n,o,i,e)})}function v(t,n,e,r,i){var o;if(U(t)){var f=t;t.addEventListener(n,e,i),o=function(){return f.removeEventListener(n,e,i)}}else if(R(t)){var s=t;t.on(n,e),o=function(){return s.off(n,e)}}else if(F(t)){var c=t;t.addListener(n,e),o=function(){return c.removeListener(n,e)}}else if(t&&t.length)for(var p=0,m=t.length;p<m;p++)v(t[p],n,e,r,i);else throw new TypeError("Invalid event target");r.add(o)}function F(t){return t&&typeof t.addListener=="function"&&typeof t.removeListener=="function"}function R(t){return t&&typeof t.on=="function"&&typeof t.off=="function"}function U(t){return t&&typeof t.addEventListener=="function"&&typeof t.removeEventListener=="function"}function H(t,n){return l(t)?new a(e=>y(t,r=>e.next(r),n)):E(t)}function J(t,n){return l(t)?new a(e=>{let r;return y(t,i=>{r?.unsubscribe(),i instanceof HTMLElement&&(r=h(i,n).subscribe(e),e.add(r))},{defer:!1})}):h(t,n)}function M(t){return{next:n=>{t(()=>n)}}}function Q(t){return function(n){return n.lift(new _(t))}}var _=function(){function t(n){this.notifier=n}return t.prototype.call=function(n,e){var r=new A(n),i=L(this.notifier,new g(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r},t}(),A=function(t){u(n,t);function n(e){var r=t.call(this,e)||this;return r.seenValue=!1,r}return n.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(T);function q(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(e){var r;typeof t[t.length-1]=="function"&&(r=t.pop());var i=t;return e.lift(new C(i,r))}}var C=function(){function t(n,e){this.observables=n,this.project=e}return t.prototype.call=function(n,e){return e.subscribe(new W(n,this.observables,this.project))},t}(),W=function(t){u(n,t);function n(e,r,i){var o=t.call(this,e)||this;o.observables=r,o.project=i,o.toRespond=[];var f=r.length;o.values=new Array(f);for(var s=0;s<f;s++)o.toRespond.push(s);for(var s=0;s<f;s++){var c=r[s];o.add(k(o,c,void 0,s))}return o}return n.prototype.notifyNext=function(e,r,i){this.values[i]=r;var o=this.toRespond;if(o.length>0){var f=o.indexOf(i);f!==-1&&o.splice(f,1)}},n.prototype.notifyComplete=function(){},n.prototype._next=function(e){if(this.toRespond.length===0){var r=[e].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},n.prototype._tryProject=function(e){var r;try{r=this.project.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(r)},n}(I);export{H as a,M as b,J as f,Q as t,q as w};
